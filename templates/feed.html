{% extends "base_temp.html" %}
{% block main %}
    <div id="feed_container" class="row narrow_feed_container">

        <div id="feed_container_column" class="large-12 small-12 columns">
            {% if goals|length == 0 %}
                <p>You're not following anyone... go get some <a href="/">inspiration</a></p>
            {% endif %}
            {% for g in goals %}
                <div id="goal_row_{{g.key.id()}}" class="row feed_row">
                    <div class="large-2 small-2 columns user_profile_modal feed_profile_card" data-user-id="{{g.user.get().key.id()}}">
                        <div class="profile_img_container" style="background-image: url('{{g.user.get().profile_img}}')">
                        </div>
                            <div class="user_profile_name">{{g.user.get().name}}</div>
                        <div class="text-center">
                            <img class="diamond_line" src="/static/images/diamond.png" />
                        </div>
                            {% if g.achieved %}
                                <div class="user_profile_text"><em>{{g.user.get().name}} added a new victory</em></div>
                            {% else %}
                                <div class="user_profile_text"><em>{{g.user.get().name}} added a new goal</em></div>
                            {% endif %}
                            
                            <div class="achieved_icon_container">
                                {% if g.achieved == True %}
                                    <span class="achieved_icon">
                                        <svg version="1.1"
                                             xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"

                                             x="0px" y="0px" width="64px" height="88.2px" viewBox="0 0 64 88.2" enable-background="new 0 0 64 88.2" xml:space="preserve">
                                        <defs>
                                        </defs>
                                        <path d="M64,32C64,14.3,49.7,0,32,0S0,14.3,0,32c0,11,5.5,20.6,13.9,26.4v29.8l18-9.2l18,9.2V58.5C58.4,52.8,64,43,64,32z
                                             M45.9,81.6l-14-7.1l-14,7.1V60.7c4.3,2.1,9,3.3,14.1,3.3c5,0,9.7-1.1,13.9-3.2V81.6z M32,60C16.6,60,4,47.4,4,32S16.6,4,32,4
                                            s28,12.6,28,28S47.4,60,32,60z"/>
                                        </svg>
                                        
                                        {% if g.vic_pics %}
                                            <span class="album_icon">
                                                <a href="/victory_album/{{g.key.id()}}">
                                                <svg version="1.1"
                                                     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"
                                                     x="0px" y="0px" width="78.1px" height="78.1px" viewBox="0 0 78.1 78.1" enable-background="new 0 0 78.1 78.1"
                                                     xml:space="preserve">
                                                <defs>
                                                </defs>
                                                <path d="M78.1,14.3C78.1,6.4,71.7,0,63.8,0C56,0,49.6,6.3,49.5,14.1H6c-3.3,0-6,2.7-6,6v52c0,3.3,2.7,6,6,6h52c3.3,0,6-2.7,6-6V28.7
                                                    C71.8,28.6,78.1,22.2,78.1,14.3z M60,72.1c0,1.1-0.9,2-2,2H6c-1.1,0-2-0.9-2-2v-7h56V72.1z M15.2,61.1l10.7-21.9l10.4,16.9
                                                    c0.3,0.6,0.9,0.9,1.6,0.9c0.7,0,1.3-0.2,1.7-0.7l4.4-5.5l4.9,10.2H15.2z M53.3,61.1l-7.1-14.8c-0.3-0.6-0.9-1-1.6-1.1
                                                    c-0.7-0.1-1.4,0.2-1.8,0.7l-4.6,5.7L27.4,34.1c-0.4-0.6-1.1-1-1.8-1c-0.7,0-1.4,0.5-1.7,1.1L10.8,61.1H4v-41c0-1.1,0.9-2,2-2h44
                                                    c1.3,4.9,5.2,8.7,10,10v33H53.3z M63.8,25c-5.9,0-10.7-4.8-10.7-10.7S57.9,3.7,63.8,3.7s10.7,4.8,10.7,10.7S69.7,25,63.8,25z"/>
                                                </svg>
                                                    {% if g.vic_pics|length > 9 %}
                                                        <span class="number_of_vic_pics">+</span>
                                                    {% else %}
                                                        <span class="number_of_vic_pics">{{g.vic_pics|length}}</span>
                                                    {% endif %}
                                                </a>
                                            </span>
                                        {% endif %}
                                    </span>
                                {% else %}
                                    <span class="achieved_icon">
                                        <svg version="1.1"
                                         xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"
                                         x="0px" y="0px" width="330.8px" height="242.5px" viewBox="0 0 330.8 242.5" enable-background="new 0 0 330.8 242.5"
                                         xml:space="preserve">
                                        <defs>
                                        </defs>
                                        <path d="M330.8,32.5c0-2.7-2.2-5-5-5s-5,2.2-5,5c0,15.2-8.7,27.9-25.8,37.9l7.2-30.8c10.6-0.4,19.2-9.1,19.2-19.8
                                            c0-10.9-8.9-19.8-19.8-19.8H29.2C18.2,0,9.3,8.9,9.3,19.8c0,10.7,8.5,19.5,19.2,19.8l7.1,30.7C18.6,60.4,9.9,47.7,9.9,32.5
                                            c0-2.7-2.2-5-5-5s-5,2.2-5,5c0,25.4,19,41.1,38.6,50.6l37,159.3h179.3l37.2-159.3C311.7,73.7,330.8,57.9,330.8,32.5z M286.5,19.8
                                            l-14.2,60.7c-26.9,9.1-63.7,13.9-107,13.9c-43.3,0-80.2-4.8-107-13.9L44.3,19.8H286.5z M239.1,222.6H91.4L61,91.7
                                            c27.3,8.3,63.1,12.6,104.4,12.6c41.3,0,77.1-4.3,104.3-12.6L239.1,222.6z"/>
                                        </svg>
                                    </span>
                                {% endif %}
                            </div>
                            
                            <div class="user_profile_text">
                                <div>
                                    <div class="score_diamond text-center">
                                        <span class="score_number">{{g.user.get().total_points}}</span>
                                    </div>
                                    <div class="total_score_text">TOTAL SCORE</div>
                                </div>
                                <div class="user_status_container">
                                    <div class="user_status" style="
                                    {% if g.user.get().status == 'None' %}
                                        background-image: url('/static/images/1_beginner.png')
                                    {% elif g.user.get().status == 'beginner' %}
                                        background-image: url('/static/images/1_beginner.png')
                                    {% elif g.user.get().status == 'bronze' %}
                                        background-image: url('/static/images/2_Bronze.png')
                                    {% elif g.user.get().status == 'silver' %}
                                        background-image: url('/static/images/3_silver.png')
                                    {% elif g.user.get().status == 'gold' %}
                                        background-image: url('/static/images/4_gold.png')
                                    {% elif g.user.get().status == 'supreme' %}
                                        background-image: url('/static/images/5_supreme.png')
                                    {% else %}
                                        background-image: url('/static/images/1_beginner.png')
                                    {% endif %}
                                    
                                    "></div>
                                </div>
                            </div>
                        <div class="bottom_img_dotted"></div>
                    </div>
                    <div class="large-10 small-10 columns feed_image_container goal_modal_trigger" data-goal-id="{{g.key.id()}}">
                        <div class="feed_goal_heading text-center">
                            {{g.title}}
                        </div>
                        <div class="feed_cover_container">
                            {% if g.achieved %}
                                {% if g.vic_pics|length == 1 %}
                                    {% include "two_img.html" %}
                                {% elif g.vic_pics|length == 2 %}
                                    {% include "three_img.html" %}
                                {% elif g.vic_pics|length == 3 %}
                                    {% include "four_img.html" %}
                                {% elif g.vic_pics|length >= 4 %}
                                    {% include "five_img.html" %}
                                {% else %}
                                    <div class="vic_feed_cover">
                                        <img id="feed_image_{{g.key.id()}}" src="{{g.image}}" class="feed_image" onerror="this.src='/static/images/error_img.jpg'" onload="resize_feed_image()" />
                                    </div>
                                {% endif %}
                            {% else %}
                                <img id="feed_image_{{g.key.id()}}" src="{{g.image}}" class="feed_image" onerror="this.src='/static/images/error_img.jpg'" onload="resize_feed_image()" />
                            {% endif %}

                        </div>
                        <div class="goal_text_container">
                            <div class="goal_text row">
                                <div class="large-6 medium-6 small-6 columns feed_like_btn_container">
                                    <div class="like_view_btn" data-goal-id="{{g.key.id()}}">
                                        <span class="l_v_icon border-right"><img src="/static/images/view.svg" width="27px" height="27px" /></span> <span id="goal_view_{{g.key.id()}}">{{g.views}} Views</span>
                                    </div> 
                                    <div class="like_view_btn goal_like_btn" data-goal-id="{{g.key.id()}}">
                                        <span class="l_v_icon border-right"><img src="/static/images/like.svg" width="27px" height="27px" /></span> <span id="goal_like_{{g.key.id()}}">{{g.likes}}</span> Likes
                                    </div>
                                </div>
                                <div class="large-6 medium-6 small-6 columns goal_text_description">
                                    <em>{{g.description}}</em>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
            {% if next %}
                <div id="next_curs" data-cursor="{{next}}" class="hidden"></div>
            {% endif %}
        </div>
    </div>

{% endblock %}

{% block script %}

{% endblock %}