function reload_masonry_container(e){e.imagesLoaded(function(){e.masonry({itemSelector:".item",gutter:10,isFitWidth:true,columnWidth:".item"})})}function ellipsis(){console.log("ellipsis");if($(".goal_text_description").length){$(".goal_text_description").dotdotdot()}}function toggle_vision_to_list(){var e=$(window).width();$(".item").css("width",e);$(".item").addClass("list_view");$(".goal_card_img").addClass("float_left");$(".goal_card_img").css("position","absolute");$(".goal_card_img").css("top","0px");$(".goal_card_img").css("bottom","0px");$(".goal_card_img").css("margin","auto");$(".goal_card_text").addClass("float_left");$(".bottom_band").addClass("hidden");$(".achieved_icon_container").addClass("hidden");$(".goal_description").addClass("hidden");$(".view_like_container_goal").addClass("hidden");$(".user_controls").addClass("hidden");$(".goal_card_title").css("margin-left","80px");$("#goal_list").addClass("goal_list_listview");$(".goal_description").removeClass("overflow_ellipsis");$(".view_like_container_goal").addClass("text_left");$(".goal_description").dotdotdot();reload_masonry_container($("#goal_list"));$("#vision_view_toggle").removeClass("vision_view_toggle_on");$("#vision_view_toggle").addClass("vision_view_toggle_off");$("#vision_view_toggle").removeClass("icon-list");$("#vision_view_toggle").addClass("icon-table")}function toggle_vision_to_masonry(){$(".item").css("width","385px");$(".item").removeClass("list_view");$(".goal_card_img").removeClass("float_left");$(".goal_card_img").css("position","relative");$(".goal_card_img").css("top","0px");$(".goal_card_img").css("bottom","0px");$(".goal_card_img").css("margin","auto");$(".goal_card_text").removeClass("float_left");$(".bottom_band").removeClass("hidden");$(".achieved_icon_container").removeClass("hidden");$(".goal_description").removeClass("hidden");$(".view_like_container_goal").removeClass("hidden");$(".goal_card_title").css("margin-left","0px");$("#goal_list").removeClass("goal_list_listview");$(".goal_description").addClass("overflow_ellipsis");$(".view_like_container_goal").removeClass("text_left");reload_masonry_container($("#goal_list"));$("#vision_view_toggle").removeClass("vision_view_toggle_off");$("#vision_view_toggle").addClass("vision_view_toggle_on");$("#vision_view_toggle").removeClass("icon-table");$("#vision_view_toggle").addClass("icon-list")}function toggle_victory_to_list(){var e=$(window).width();$(".item").css("width",e);$(".item").addClass("list_view");$(".goal_card_img").addClass("float_left");$(".goal_card_img").css("position","absolute");$(".goal_card_img").css("top","0px");$(".goal_card_img").css("bottom","0px");$(".goal_card_img").css("margin","auto");$(".goal_card_text").addClass("float_left");$(".goal_card_title").css("margin-left","80px");$(".bottom_band").addClass("hidden");$(".achieved_icon_container").addClass("hidden");$(".goal_description").addClass("hidden");$(".view_like_container_goal").addClass("hidden");$(".user_controls").addClass("hidden");$("#goal_list").addClass("goal_list_listview");$(".goal_description").removeClass("overflow_ellipsis");$(".view_like_container_goal").addClass("text_left");$(".goal_description").dotdotdot();reload_masonry_container($("#goal_list"));$("#victory_view_toggle").removeClass("victory_view_toggle_on");$("#victory_view_toggle").addClass("victory_view_toggle_off");$("#victory_view_toggle").removeClass("icon-list");$("#victory_view_toggle").addClass("icon-table")}function toggle_victory_to_masonry(){$(".item").css("width","385px");$(".item").removeClass("list_view");$(".goal_card_img").removeClass("float_left");$(".goal_card_img").css("position","relative");$(".goal_card_img").css("top","0px");$(".goal_card_img").css("bottom","0px");$(".goal_card_img").css("margin","auto");$(".goal_card_text").removeClass("float_left");$(".goal_card_title").css("margin-left","0px");$(".bottom_band").removeClass("hidden");$("#goal_list").removeClass("goal_list_listview");$(".goal_description").addClass("overflow_ellipsis");$(".view_like_container_goal").removeClass("text_left");reload_masonry_container($("#goal_list"));$("#victory_view_toggle").removeClass("victory_view_toggle_off");$("#victory_view_toggle").addClass("victory_view_toggle_on");$("#victory_view_toggle").removeClass("icon-table");$("#victory_view_toggle").addClass("icon-list")}function listen_for_drag_feed_img(){$(".feed_image_edit").draggable({axis:"y"});$(".feed_image_container_edit").droppable({drop:function(e,t){var n=t.position.top;$("#top").val(n);$("#reposition_instructions").addClass("hidden");$("#image_crop_form").removeClass("hidden")}})}function add_user_share_point(){function e(e){}$.ajax({type:"post",url:"/share_point",success:e}).fail(function(e){alert("error - share_point")});}function user_search(e){function t(e){$("#search_results").removeClass("hidden");$("#search_results").children("ul").html("");var t="";for(var n=0;n<e["users"].length;n++){t+="<li class='user_profile_modal pointer' data-user-id='"+e["users"][n]["id"]+"'>"+e["users"][n]["name"]+"</li>"}$("#search_results").children("ul").append(t)}$.ajax({type:"get",data:{user_email:e},url:"/search_users",success:t}).fail(function(e){alert("error - user_search")});}function delete_account(){function e(e){NProgress.done();alert("Deleted")}NProgress.start();$.ajax({type:"post",url:"/delete_account",success:e}).fail(function(e){NProgress.done();alert("error - delete_account")});}function change_password(e,t,n){function r(e){NProgress.done();if(e["message"]=="success"){$("#old_password").val("");$("#new_password").val("");$("#repeat_password").val("");$("#change_pw_message").html("Password Changed")}else{$("#old_password").val("");$("#new_password").val("");$("#repeat_password").val("");$("#change_pw_message").html(e["message"])}}NProgress.start();$.ajax({type:"post",url:"/change_password",data:{old_password:e,new_password:t,repeat_password:n},success:r}).fail(function(e){NProgress.done();alert("error - change_password")});}function change_email(e,t,n){function r(e){NProgress.done();if(e["message"]=="success"){$("#password").val("");$("#old_email").val("");$("#new_email").val("");$("#change_email_message").html("Email Changed")}else{$("#password").val("");$("#old_email").val("");$("#new_email").val("");$("#change_email_message").html(e["message"])}}NProgress.start();$.ajax({type:"post",url:"/change_email",data:{password:e,old_email:t,new_email:n},success:r}).fail(function(e){NProgress.done();alert("error - change_email")});}function submit_forgotten_pw(e){function t(e){NProgress.done();alert(e["message"])}NProgress.start();$.ajax({type:"post",url:"/forgot_password",data:{recovery_email:e},success:t}).fail(function(e){NProgress.done();alert("error - recovery_email")});}function size_profile_img_container(){var e=$(".profile_img_container").css("width");$(".profile_img_container").css("height",e)}function resize_feed_image(){$(".feed_image").each(function(e,t){var n=$(this).attr("id");orient_feed_img(n)})}function orient_feed_img(e){var t=$("#"+e);var n=t.width()/t.height();if(n>2.18){t.css("width","100%");t.css("height","auto");t.css("position","absolute");t.css("top","0px");t.css("bottom","0px");t.css("left","0px");t.css("right","0px");t.css("margin","auto")}else if(n==1){t.css("height","100%");t.css("width","auto");t.css("margin","auto")}else if(n<2.18){t.css("position","absolute");t.css("height","100%");t.css("width","auto");t.css("left","0px");t.css("right","0px");t.css("margin","auto")}}function submit_vic_img_url_form(e,t){function n(e){var t=e["img_url"];var n='<div class="item"><img src="'+t+'" class="goal_card_img" /><div class="goal_card_text" class="row text-center"><span class="button tiny">Make Cover Image</span></div></div>';$("#goal_list").prepend(n);$("#panel-img_url").addClass("success");var r=[];r.push(n);$("#goal_list").masonry.layout();$("#goal_list").append(n).masonry("appended",n);NProgress.done()}NProgress.start();$.ajax({type:"post",url:"/add_vic_img_url",data:{vic_img_url:e,vic_img_url_goal_id:t},success:n}).fail(function(e){NProgress.done();alert("error - submit_vic_img_url_form")})}function delete_goal(e){function t(e){$("#feedModal").foundation("reveal","close");var t=e["goal_id"];$("#goal_list").masonry("remove",$("#goal_"+t));$("#goal_list").masonry().layout();NProgress.done()}NProgress.start();$.ajax({type:"post",url:"/delete_goal",data:{goal_id:e},success:t}).fail(function(e){NProgress.done();alert("error - delete_goal")})}function make_cover_img(e,t,n){function r(e){$(".feed_image").attr("src",e["img_url"]);$("#vic_pic_"+n).attr("src",e["old_cover"]);$("#make_cover_"+n).data("img-url",e["old_cover"]);NProgress.done()}NProgress.start();$.ajax({type:"post",url:"/make_cover",data:{img_url:e,goal_id:t},success:r}).fail(function(e){NProgress.done();alert("error - make_cover_img")})}function delete_media(e,t,n){function r(e){$("#edit_goal_"+n).remove();reload_masonry_layout();NProgress.done()}NProgress.start();$.ajax({type:"post",url:"/delete_media",data:{img_url:e,goal_id:t},success:r}).fail(function(e){alert("error - delete img");NProgress.done()})}function add_goal_ajax(){function i(t){var n=t["goal_id"];NProgress.done();e.resolve(n)}var e=new jQuery.Deferred;var t=$("#goal_title_img_upload").val();var n=$("#goal_description_img_upload").val();if($("#already_achieved")){var r=$("#already_achieved").val()}else{var r="no"}NProgress.start();$.ajax({type:"POST",url:"/add_goal_ajax",data:{goal_title:t,goal_description:n,already_achieved:r},success:i}).fail(function(t){alert("error - add_goal_ajax");NProgress.done();e.reject(data)});return e.promise()}function verify_profile_settings(){var e=$("#user_name").val();if(e.length<0){$("#user_name").addClass("error");return false}else{return true}}function submit_profile_settings(){function n(e){NProgress.done();$("#profile_settings_form").addClass("success")}NProgress.start();var e=$("#user_name").val();var t=$("#user_description").val();$.ajax({type:"post",url:"/settings",data:{user_name:e,user_description:t},success:n}).fail(function(e){NProgress.done();alert("error - submit_profile_settings")})}function submit_title_description_edit(){function i(e){$("#feed_image_"+e["goal_id"]).attr("src",e["edit_url"]);$("#image_edit").addClass("success");resize_feed_image();NProgress.done()}NProgress.start();var e=$("#edit_url").val();var t=$("#edit_title").val();var n=$("#edit_description").val();var r=$("#goal_id_td").val();$.ajax({type:"post",url:"/edit_title_description",data:{edit_title:t,goal_id:r,edit_description:n,edit_url:e},success:i}).fail(function(e){NProgress.done();alert("error - submit_title_description_edit")})}function submit_image_position(){function n(e){$(".feed_image_edit").css("top",e["top"]+"px");$("#reposition_instructions").html("Reposition");$("#reposition_instructions").removeClass("hidden");$("#image_crop_form").addClass("hidden")}var e=$("#top").val();var t=$("#goal_id").val();$.ajax({type:"post",url:"/save_img_pos",data:{top:e,goal_id:t},success:n}).fail(function(e){alert("error - submit_image_position")})}function show_user_profile(e){function t(e){NProgress.done();$("#user_profile_container").html(e);size_profile_img_container();$(".goal_description").dotdotdot()}NProgress.start();$.ajax({type:"get",url:"/get_user_profile/"+e,success:t}).fail(function(e){NProgress.done();alert("error - get_user_html")})}function show_goal_profile(e){function t(e){NProgress.done();$("#goal_profile_container").html(e);size_profile_img_container();$(".goal_page_description").dotdotdot()}NProgress.start();$.ajax({type:"get",url:"/get_goal_profile/"+e,success:t}).fail(function(e){NProgress.done();alert("error - get_user_html")})}function add_view(e){function t(t){var n=t["views"];$("#goal_view_"+e).html(n+" Views");console.log(n)}$.ajax({type:"POST",url:"/add_view/"+e,success:t}).fail(function(e){alert("error - add_view")});}function add_like(e){function t(t){var n=t["likes"];$("#goal_like_"+e).html(n);console.log(n)}$.ajax({type:"POST",url:"/add_like/"+e,success:t}).fail(function(e){alert("error - add_like")});}function follow(e){function t(e){if(e["following"]=="yes"){$(".follow_user").addClass("hidden");$(".unfollow_user").removeClass("hidden")}}$.ajax({type:"POST",url:"/follow/"+e,success:t}).fail(function(e){alert("error - follow")});}function unfollow(e){function t(e){if(e["following"]=="no"){$(".follow_user").removeClass("hidden");$(".unfollow_user").addClass("hidden")}}$.ajax({type:"POST",url:"/unfollow/"+e,success:t}).fail(function(e){alert("error - follow")});}function make_victory(e){function t(e){NProgress.done();$("#vic_img_url_goal_id").val(e["goal_id"]);$("#vic_congrats_goal_id").val(e["goal_id"]);$("#vid_goal_id").val(e["goal_id"]);$("#victoryModal").foundation("reveal","open")}NProgress.start();$.ajax({type:"POST",url:"/add_victory/"+e,success:t}).fail(function(e){NProgress.done();alert("error - ad_victory")});}function get_upload_url(e,t){function r(e){var t=e["upload_url"];n.resolve(t)}var n=new jQuery.Deferred;$.ajax({type:"get",data:{callback_url:e,img_type:t},url:"/get_upload_url",success:r}).fail(function(e){alert("FAIL");n.reject(e)});return n.promise()}function check_file_size(e,t){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var n=e[0].files[0].size;if(n>t){alert(n+" The file you've chosen is too big, please ensure its less than 500kb")}else{return true}}else{alert("Please upgrade your browser, because your current browser lacks some new features we need!")}}function youtube_parser(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;var n=e.match(t);if(n&&n[7].length==11){return n[7]}else{alert("bad URL")}}function load_more_goals(e){function t(e){NProgress.done();$("#next_curs").remove();var t=$(e);t.css("visibility","hidden");$("#goal_list").append(t).imagesLoaded(function(){if($("#vision_view_toggle").hasClass("vision_view_toggle_off")){toggle_vision_to_list()}if($("#victory_view_toggle").hasClass("victory_view_toggle_off")){toggle_victory_to_list()}t.css("visibility","visible");$("#goal_list").masonry("appended",t)});$("#goal_list").removeClass("loading_content");ellipsis()}NProgress.start();if($("#next_curs").length&&!$("#goal_list").hasClass("loading_content")){if($("#goal_list").hasClass("page_victories")){var n="yes"}else{var n="no"}if($("#goal_list").hasClass("page_goals")){var r="yes"}else{var r="no"}$("#goal_list").addClass("loading_content");var i=$("#goal_list").data("user-id");var s=$("#next_curs").data("cursor");$.ajax({type:"get",data:{cursor:s,goal:r,victory:n,for_user:i},url:"/page_goals",success:t}).fail(function(e){NProgress.done();alert("error - load_more_goals")})}else{NProgress.done()}}function load_more_feed_goals(e){function t(e){NProgress.done();$("#next_curs").remove();$("#feed_container_column").append(e);reload_masonry_layout();$("#feed_container_column").removeClass("loading_content");ellipsis();resize_feed_image();size_profile_img_container()}NProgress.start();if($("#next_curs").length&&!$("#feed_container_column").hasClass("loading_content")){$("#feed_container_column").addClass("loading_content");var n=$("#next_curs").data("cursor");$.ajax({type:"get",data:{cursor:n},url:"/page_feed_goals",success:t}).fail(function(e){NProgress.done();alert("error - load_more_goals")})}else{NProgress.done()}}function reload_masonry_layout(){NProgress.start();var e=$("#goal_list");e.masonry("reloadItems");e.imagesLoaded(function(){e.masonry({itemSelector:".item",gutter:10,isFitWidth:true,columnWidth:".item"});NProgress.done()})}var window_width=$("#goal_container_front").width();var num_columns=Math.floor(window_width/240);var column_width=window_width/num_columns;var $container=$("#goal_list");$container.imagesLoaded(function(){$container.masonry({itemSelector:".item",gutter:10,isFitWidth:true,columnWidth:".item"})});$("body").on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",".success",function(){$(this).removeClass("success")});$(document).on("scroll",function(){var e=$(document).outerHeight();var t=$(window).outerHeight();var n=$(document).scrollTop();var r=false;if(n+t>e*.8&&!r){r=true;if($("#goal_list").length){load_more_goals()}else if($("#feed_container_column").length){load_more_feed_goals()}}if($("#bv_feed_banner")){if($(".sticky").length){var i=$(".sticky").offset().top;var s=i-$(window).scrollTop();if(s<=0){$("#bv_feed_banner").remove();$(".sticky").css("top","0px");$(".sticky").addClass("fixed");$(".fixed").removeClass("sticky");$("body").css("margin-top","47px")}}}});$(document).on("close","#userModal",function(){$("#user_profile_container").html("<p>Loading</p>")});$("body").on("click","#login_btn_toggle",function(){$("#site_description").css("left","0%");$("#login_btn_toggle").hide();$("#signup_btn_toggle").show()});$("body").on("click","#signup_btn_toggle",function(){$("#site_description").css("left","-200%");$("#signup_btn_toggle").hide();$("#login_btn_toggle").show()});$("body").on("click","#login_toggle",function(){$("#bv_description").addClass("hidden");$("#register").addClass("hidden");$("#login").removeClass("hidden")});$("body").on("click","#register_toggle",function(){$("#bv_description").addClass("hidden");$("#login").addClass("hidden");$("#register").removeClass("hidden")});$("body").on("click","#bv_logo",function(){$("#site_description").css("left","-100%")});$(window).on("load",function(){ellipsis();resize_feed_image();size_profile_img_container()});$("body").on("click",".media_modal",function(){var e=$(this);var t=e.data("img-url");var n=e.data("youtube-id");if(n=="no"){n=false}$("#mediaModal").foundation("reveal","open");if(n){$("#modal_media_container").html('<iframe id="vid_iframe" type="text/html" width="640" height="390" src="http://www.youtube.com/embed/'+n+'?autoplay=1" frameborder="0"/>')}else{$("#modal_media_container").html("<img class='' src='"+t+"' />")}});$("body").on("click",".album_icon",function(e){e.stopPropagation()});$("body").on("click",".share_point",function(){add_user_share_point()});$("body").on("click",".goal_like_btn",function(e){e.stopPropagation()});$("body").on("click",".user_controls",function(e){e.stopPropagation()});$("body").on("click",".user_profile_modal",function(e){e.stopPropagation()});$("body").on("click",".user_profile_modal",function(){$("#userModal").foundation("reveal","open");var e=$(this).data("user-id");var t=show_user_profile(e)});$(document).on("close","#userModal",function(){$("#user_profile_container").html("<p>Loading</p>")});$("body").on("click",".goal_modal_trigger",function(){$("#feedModal").foundation("reveal","open");var e=$(this).data("goal-id");var t=show_goal_profile(e);add_view(e)});$(document).on("close","#feedModal",function(){$("#goal_profile_container").html("<p>Loading</p>")});$("body").on("click",".goal_like_btn",function(){var e=$(this).data("goal-id");add_like(e)});$("body").on("click",".steal_goal",function(e){var t=$(this);var n=t.data("goal-id");var r=t.data("user-name");$("#victim_goal_name").html(r);$("#steal_goal").val(n);$("#stealModal").foundation("reveal","open");e.stopPropogation()});$("body").on("click",".steal_victory",function(e){var t=$(this);var n=t.data("goal-id");var r=t.data("user-name");$("#victim_victory_name").html(r);$("#steal_victory").val(n);$("#stealVictoryModal").foundation("reveal","open");e.stopPropogation()});$("body").on("click",".achieved_btn",function(){var e=$(this).data("goal-id");make_victory(e)});$("body").on("click",".follow_user",function(){var e=$(this).data("user-id");follow(e)});$("body").on("click",".unfollow_user",function(){var e=$(this).data("user-id");unfollow(e)});$("body").on("click","#title_description_edit_btn",function(){$("#set_title_description").addClass("hidden");$("#title_description_edit_form_container").removeClass("hidden")});$("body").on("click",".make_cover_img",function(){var e=$(this);var t=e.data("img-url");var n=e.data("goal-id");var r=e.data("loop-index");make_cover_img(t,n,r)});$("body").on("click",".delete_media",function(){var e=$(this);var t=e.data("img-url");var n=e.data("goal-id");var r=e.data("loop-index");delete_media(t,n,r)});$("body").on("click",".goal_delete",function(){var e=$(this).data("goal-id");delete_goal(e)});$("body").on("click","#change_profile_img",function(e){e.preventDefault();$(this).addClass("hidden");$("#profile_img_form").removeClass("hidden")});$("body").on("click","#share_btn",function(){var e=$(this);if(e.hasClass("toggle_on")){$(".share_container").removeClass("hidden");$(".edit_container").addClass("hidden")}else{$(".share_container").addClass("hidden")}});$("body").on("click","#change_btn",function(){var e=$(this);if(e.hasClass("toggle_on")){$(".edit_container").removeClass("hidden");$(".share_container").addClass("hidden")}else{$(".edit_container").addClass("hidden")}});$("body").on("click",".toggle_on",function(){var e=$(this);$("#toggle_container").css("max-height","1000px");$(".toggle_on").addClass("toggle_off");$(".toggle_off").removeClass("toggle_on")});$("body").on("click",".toggle_off",function(){var e=$(this);$("#toggle_container").css("max-height","0px");$(".toggle_off").addClass("toggle_on");$(".toggle_on").removeClass("toggle_off")});$("body").on("click",".goal_form_toggle_on",function(){$("#goal_add_form_container").css("max-height","1000px");$("#goal_form_toggle").removeClass("goal_form_toggle_on");$("#goal_form_toggle").addClass("goal_form_toggle_off");$("#goal_form_toggle").removeClass("icon-plus");$("#goal_form_toggle").addClass("icon-minus")});$("body").on("click",".goal_form_toggle_off",function(){$("#goal_add_form_container").css("max-height","0px");$("#goal_form_toggle").removeClass("goal_form_toggle_off");$("#goal_form_toggle").addClass("goal_form_toggle_on");$("#goal_form_toggle").removeClass("icon-minus");$("#goal_form_toggle").addClass("icon-plus")});$("body").on("click",".vision_view_toggle_on",function(){toggle_vision_to_list()});$("body").on("click",".vision_view_toggle_off",function(){toggle_vision_to_masonry()});$("body").on("click",".victory_view_toggle_on",function(){toggle_victory_to_list()});$("body").on("click",".victory_view_toggle_off",function(){toggle_victory_to_masonry()});$("body").on("click",".vic_orbit_thumb_pic",function(){var e=$("#modal_goal_profile_img");var t=e.attr("src");var n=$("#vid_iframe");n.attr("src","");n.addClass("hidden");var r=$(this).data("img-url");$(".feed_cover_container").css("background-color","transparent");e.attr("src",r);resize_feed_image()});$("body").on("click",".vic_orbit_thumb_vid",function(){var e=$("#modal_goal_profile_img");var t=$("#vid_iframe");t.removeClass("hidden");e.addClass("hidden");$(".feed_cover_container").css("background-image","none");$(".feed_cover_container").css("background-color","white");e.attr("src","");var n=$(this).data("img-url");t.attr("src","http://www.youtube.com/embed/"+n+"?autoplay=1")});$("body").on("click","#reposition_instructions",function(){$("#reposition_instructions").html("Now drag image");listen_for_drag_feed_img()});$("body").on("click","#user_search_submit",function(){var e=$("#user_email").val();if(e.length>0){user_search(e)}});$("body").on("submit","#user_search_form",function(e){e.preventDefault();var t=$("#user_email").val();if(t.length>0){user_search(t)}});$("body").on("submit","#forgot_password_form",function(e){e.preventDefault();var t=$("#recovery_email").val();submit_forgotten_pw(t)});$("body").on("submit","#change_pw_form",function(e){e.preventDefault();var t=$("#old_password").val();var n=$("#new_password").val();var r=$("#repeat_password").val();change_password(t,n,r)});$("body").on("submit","#change_email_form",function(e){e.preventDefault();var t=$("#password").val();var n=$("#old_email").val();var r=$("#new_email").val();change_email(t,n,r)});$("body").on("click","#delete_account",function(){$("#deleteAccountModal").foundation("reveal","open")});$("body").on("click","#delete_acc",function(){delete_account()});$("body").on("click","#delete_abort",function(){$("#deleteAccountModal").foundation("reveal","close")});$("body").on("click","#profile_settings_submit",function(e){e.preventDefault();if(verify_profile_settings()){submit_profile_settings()}});$("body").on("click","#image_top_submit",function(e){e.preventDefault();submit_image_position()});$("body").on("click","#title_description_submit",function(e){e.preventDefault();submit_title_description_edit()});$("body").on("click","#profile_img_submit",function(){var e=$("#user_id").val();if(check_file_size($("#user_profile_img"),6e5)){$.when(get_upload_url("/upload_profile_img/"+e,"profile")).then(function(e){$("#profile_img_form").attr("action",e);$("#profile_img_form").trigger("submit")})}});$("body").on("submit","#goal_submit_form",function(e){if(!$("#goal_img_url").val()){e.preventDefault();alert("Please include an image URL")}});$("body").on("submit","#vic_img_url_form",function(e){if(!$("#vic_img_url").val()){e.preventDefault();alert("Please include an image URL")}});$("body").on("submit","#goal_submit_video_embed_form",function(e){if(!$("#goal_video_embed").val()){e.preventDefault();alert("Please include a youtube URL")}});$("body").on("click","#goal_img_submit",function(){if(!$("#goal_img").val()){alert("Please select a file")}else{var e=$("#user_id").val();var t=$("#already_achieved").val();if(t){var n="yes"}else{var n="no"}if($("#edit_goal_id").length>0){var r=$("#edit_goal_id").val()}else{var r=""}if(r.length){if(check_file_size($("#goal_img"),3e6)){$.when(get_upload_url("/upload_goal_edit_img/"+e+"/"+r,"goal")).then(function(e){$("#goal_img_upload_form").attr("action",e);$("#goal_img_upload_form").trigger("submit")})}}else{if(check_file_size($("#goal_img"),3e6)){$.when(add_goal_ajax()).then(function(t){$.when(get_upload_url("/upload_goal_img/"+e+"/"+t+"/"+n,"goal")).then(function(e){$("#goal_img_upload_form").attr("action",e);$("#goal_img_upload_form").trigger("submit")})})}}}});$("body").on("click","#vic_img_url_submit",function(e){e.preventDefault();var t=$("#vic_img_url").val();var n=$("#vic_img_url_goal_id").val();if(t.length>0){submit_vic_img_url_form(t,n)}});$("body").on("click","#victory_img_submit",function(){var e=$("#user_id").val();var t=$("#goal_id").val();if(!t){var t=$("#vic_congrats_goal_id").val()}if(check_file_size($("#vic_img"),3e6)){$.when(get_upload_url("/upload_vic_img/"+e+"/"+t,"vic_pic")).then(function(e){$("#victory_img_upload_form").attr("action",e);$("#victory_img_upload_form").trigger("submit")})}});var fbAppId="722137364473621";window.fbAsyncInit=function(){FB.init({appId:fbAppId,status:true,cookie:true,xfbml:true});$("body").on("click",".invite_fb_friend",function(){FB.ui({method:"send",link:"http://bucketvision.com",name:"Bucket Vision",picture:"http://bucketvision.com/static/images/bucketvision_title_white.png",caption:"Bucket Vision",description:"Join Bucket Vision, a place to share your Visions and Victories"})})};(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n)){return}r=e.createElement(t);r.id=n;r.src="//connect.facebook.net/en_US/all.js";i.parentNode.insertBefore(r,i)})(document,"script","facebook-jssdk")